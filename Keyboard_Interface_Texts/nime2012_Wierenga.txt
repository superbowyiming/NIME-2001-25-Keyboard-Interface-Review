A New Keyboard-Based, Sensor-Augmented Instrument for Live PerformanceRed WierengaThe Graduate Center of The City University of New York365 Fifth AvenueNew York, NY 10016redspect@gmail.comABSTRACTIn an attempt to utilize the expert pianist's technique and spare bandwidth, a new keyboard-based instrument augmented by sensors suggested by the examination of existing acoustic instruments is introduced. The complete instrument includes a keyboard, various pedals and knee levers, several bowing controllers, and breath and embouchure sensors connected to an Arduino microcontroller that sends sensor data to a laptop running Max/MSP, where custom software maps the data to synthesis algorithms. The audio is output to a digital amplifier powering a transducer mounted on a resonator box to which several of the sensors are attached. Careful sensor selection and mapping help to facilitate performance mode. KeywordsGesture, controllers, Digital Musical Instrument, keyboard1.INTRODUCTIONThe MIDI keyboard, although prevalent and readily available commercially, is often considered inadequate for performance of electronic music. As Andy Hunt says, “[T]he keyboard is a good way of triggering polyphonic ballistic events, but not of controlling them throughout time (a requirement of much electronic music)” [9]. Given this, one may question the use of a keyboard as the basis for a new electronic musical instrument. The answer is suggested in Perry Cook's principles for designing new computer music controllers [3, 5], of which these are particularly relevant:•“Copying an instrument is dumb, leveraging expert technique is smart.”•“Some players have spare bandwidth, some do not.”•“Existing instruments suggest new controllers.”Firstly, trained pianists have expert technique, forged by years of lessons, practice, performances, and—often—conservatory education. While, to paraphrase Cook, the best piano is a piano, one should consider how to leverage a pianist's expert technique in creating a new electronic instrument. Secondly, while it might appear that pianists do not have spare bandwidth but in fact literally have their hands full, it is opined that pianists do indeed have spare bandwidth. Looking at other existing instruments, including organs, illustrates this while suggesting ways to augment the keyboard. The present instrument endeavors to increase timbral and performative 
possibilities of a keyboard-based instrument while facilitating the control of sounds through time. While the solutions offered are tailored to this goal, many also apply to other instruments that allow the performer spare bandwidth.2.SENSORSIn designing a new keyboard-based instrument, an obvious starting point is the keyboard itself and its standard accoutrements. Other keyboard instruments as well as instruments from other paradigms are then examined to suggest suitable sensors that help accomplish the present goal.2.1 KeyboardThe keyboard should be selected for its tactile feel, perhaps best approximating the action of a well-regulated grand piano, and for the amount and quality of its sensor data. For example, while most keyboard controllers transmit attack velocity, very few transmit release velocity, a useful parameter. Similarly, while many keyboard controllers transmit channel aftertouch, very few transmit polyphonic aftertouch. The present instrument employs a keyboard that does. Several new designs offer the ability to free the performer from the twelve-tone, fixed-pitch paradigm while leveraging the expert keyboardist's technique, a part of which—neglected by generalized multi-touch designs—is an intimate tactile knowledge of the physical geometry of the keyboard [6, 12, 13, 14]. One such design may incorporated into a later version of the instrument.2.2 Piano PedalsThe majority of keyboard sustain pedals are digital (i.e., they are only on or off), but this is a gross simplification of an acoustic piano's sustain pedal, which is analog and allows for more dynamic pedaling effects. Therefore the present instrument uses an analog sustain pedal. While keyboardists tend to use an una corda or “soft” pedal less frequently than do pianists, the instrument incorporates an analog una corda pedal, thereby affording real-time control of timbre and dynamics.2.3 Pump PedalsOther instruments suggest new controllers that utilize a keyboardist's spare bandwidth. One such instrument is the reed organ or harmonium, in which a piano-like keyboard controls reeds that vibrate from air pushed or sucked via pedal-operated bellows. The amount of energy input by the performer via the pedals governs the instrument's output volume while subtly affecting the timbre and pitch. The present instrument uses Interact V3 video game racing pedals that each control a potentiometer and whose cord terminates in a five-pin mini-DIN plug, making connection to the Arduino easy. 2.4 Knee LeversMany reed organs have two knee levers. Typically, the right knee lever affects the instrument's output amplitude primarily and timbre secondarily. The left knee lever, on the other foot, is similar in function to a pipe organ's crescendo pedal and opens 
Permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page. To copy otherwise, to republish, to post on servers or to redistribute to lists, requires prior specific permission and/or a fee.NIME’12, May 21-23, 2012, University of Michigan, Ann Arbor.Copyright remains with the author(s).
up more (brighter) stops the further it is displaced. These levers are normally spring-loaded or otherwise outfitted to present force against the player's knees when in use and return to their original position when not in use. Readily available joysticks are inexpensive and suitable for this use. The joysticks should output analog data and provide physical resistance against the player's knees. Currently, the instrument uses two small thumbsticks (small joysticks commonly found on commercial game controllers) attached to aluminum bars and modified by the addition of rubber bands to increase physical resistance.2.5 Breath Pressure, Embouchure, and Head Gesture SensorsMany wind instruments are played with two hands but—unlike the piano—utilize the performer's breath and embouchure for sound production. Thus the present instrument augments the keyboard with a breath controller coupled with a force sensitive resistor to measure embouchure. One complaint about some breath pressure sensors is that the performer's sensation is similar to blowing up a balloon [16]. To mitigate this, the mouthpiece allows air to escape, and the sensor (Freescale MPXV5004GC6T1) has a relatively low operating pressure range of 0.57 psi, making it conducive to expressive performance. This pressure sensor also responds to negative applied pressure, thus facilitating inhalation as a parameter in addition to blowing.As Rovan et al. have shown, accompanist or ancillary gestures in acoustic instruments can affect the sound of the instrument [15]. Ancillary gestures may also affect what the performer hears but not what the audience hears. For example, a pianist may shake her head and experience the sound of a Doppler-shifted piano, yet this does nothing to the actual sound of the piano as heard by the audience. The instrument takes advantage of ancillary gestures by tracking head gestures, using a thumbstick on which the mouthpiece is mounted, and mapping them to sound parameters. The thumbstick and mouthpiece apparatus is mounted on a harmonica holder, granting the performer hands-free operation. The advantages of such a system over camera-based sensors are several. First, the performer exerts effort to move a physical device, inputting energy to shape the sound and thereby leading to a meaningful relationship with the instrument. Furthermore, this effort, its relationship to the sensor, and its relationship to the sound are all visually obvious to the audience, making associations between the visual and the aural transparent.2.6Crank, Ratchet, and Shaking SensorsIf one is willing to temporarily sacrifice some of a pianist's otherwise occupied bandwidth, controllers may be operated by one hand while the other hand plays the keyboard. In fact, pitch bend wheels and modulation wheels often found on commercially-produced keyboards are two examples of this kind of controller, as are joysticks and XY-pads. So, too, are the hand-crank used to operate the wheel-bow of a hurdy gurdy, the bow on Cor Fuhler's keyboard/violin hybrid keyolin [8], and the left hand touche d’intensité (intensity button) of an ondes martenot. Significantly, all three of these are based on the bowed string paradigm coupled with a keyboard. The ondes martenot also allows for staccato articulations, and the keyolin may be played pizzicato as well as arco. While standard modulation wheels and pitch bend wheels are typically used in modification gestures only, the present instrument incorporates controllers used for excitation gestures as well. Specifically, the current instrument uses a hurdy gurdy-style crank and a ratchet-style crank (the gesture in the latter, while continuous, results in a sequence of impulsive excitations). (An additional bowing sensor, not currently used, may be employed in the future; 
candidates include traditional bow interfaces similar to those in the literature, numerous extant multi-touch surfaces, or generalized friction controllers.)The crank controller comprises a handle attached to a rotary encoder without detents. (Alternatively, a DC motor could be used as a generator; the chief advantage being the physical resistance that provides haptic feedback [1].) The ratchet controller comprises a similar crank handle mounted on a rotary encoder with detents; the haptic sensation caused by the detents is directly related to the sound output, for an impulsive excitation is triggered at each detent.Generalizing this paradigm, if one hand selects pitches, the other hand may use other types of excitation gestures, for example, shaking, as in maracas. Therefore, the instrument is augmented by a Nintendo Wii Remote, which contains an accelerometer and, with the MotionPlus accessory, a gyroscope, useful sensors for capturing shaking gestures.2.7 Summary of SensorsThe instrument now has a bevy of sensors with which to work. The sensors and the types of gestures they afford are summarized in Table 1.Table 1. Sensors and the gestures they affordKeyboardExcitationModificationSustain pedal(Excitation)ModificationSoft pedal(Excitation)ModificationPump pedalsExcitationModificationKnee leversModificationBreath/embouchureExcitationModificationHead gesture thumbstickModification CrankExcitation(Modification)RatchetExcitation(Modification)Shaker (Wii Remote)Excitation(Modification)3.MAPPINGMapping of these sensors should make them intuitive and conducive to performance mode. Fortunately, since most of the controllers are based upon their analogs in traditional acoustic instruments, similar types of mappings apply to the new instrument. While the following mapping strategies arise from suggestions in the literature and from traditional acoustic instruments, specific mappings are of necessity the result of implementation and experimentation. The discussion here focuses on the first layers of the mapping to show the types of behavior the instrument exhibits in response to performer gestures. Nevertheless, synthesis methods are intimately connected with the gestures that control them. In implementing mappings, parameters are coupled together when possible, utilizing convergent mapping and non-linearities.3.1 Keyboard MappingThe keyboard played alone acts much as a piano keyboard: impulsively excited tones triggered by key depressions are of amplitude, duration, and brightness related to key attack velocity; they decay gradually while the key remains depressed or the sustain pedal is depressed; and they terminate when the key is released while the sustain pedal is not depressed or vice versa. The duration of the ending is determined by the key release velocity and/or the amount the sustain pedal is depressed (after the key is released, the sustain pedal when not fully depressed gradually damps the “string's” vibrations).3.2 Pedal MappingsThe sustain pedal controls admittance to, and damping amount 
of, a reverberation effect. Although the sustain pedal seems at first to only afford modification gestures, it in fact also allows excitation gestures: when fully depressed and then quickly released, the piano's sustain pedal causes the dampers to strike and excite the strings. This instrument models this behavior.The soft or una corda pedal facilitates the mellowing of timbre of notes struck or otherwise excited while the pedal is depressed. Creative synthesis programming enables a high degree of timbre manipulation. Interestingly, the soft pedal of an upright piano is not an una corda pedal per se, as, rather than moving the piano hammers to the side so that they each only strike one string, the pedal moves the hammers closer to the strings. The clever performer may exploit (or abuse) this design by quickly, fully, and repeatedly stomping on the upright piano's soft pedal, thereby eliciting random excitations from strings struck by hammers that overshoot their intended new position. The present instrument incorporates this whimsical feature to allow for excitation gestures.As on a reed organ, the pump pedal's amount of energy controls amplitude dynamics while slightly affecting the timbre and pitch. This is already a “complex” mapping, as the position itself is not measured, but the rate at which the position changes is, making this conducive to “flow” emergence [11].This paradigm illustrates two useful behaviors: 1) control data is based upon the amount of activity rather than only the current status of the controller; and 2) this higher-level control data itself may then affect parameters in a non-linear fashion through the use of thresholds, for instance. This second quality suggests exploitation of the possibilities provided by the computer and calls to mind Michel Waisvisz's “GoWi” algorithm implemented on his instrument The Hands [18]. Thus an additional “activity” sensor is applied to other sensors, and this new control data influences parameters and in turn non-linearly affect a third meta-controller that triggers more extreme responses from the instrument. This is applied to individual controllers as well as to the sum activity of the instrument.3.3 Knee Lever MappingsThe left knee lever, analogous to that of the reed organ, gradually adds more and brighter “stops” the further it is displaced. The right knee lever, which controls amplitude and (subtly) timbre in a reed organ, functions similarly here, although to avoid redundancy and instead increase timbral range it is cross-coupled non-linearly with the other controllers that also affect amplitude and timbre. 3.4 Mouthpiece MappingsThe breath pressure and embouchure sensors are coupled together similarly as on a clarinet [15], employing a biasing function and non-linearly affecting on amplitude and timbre.Additionally, the head gesture controller takes advantage of ancillary gestures that impact what the traditional musician hears, whether this affects the actual sound or not. A mapping directly relating to Rovan's example controls the zeros of a comb filter by the position of the thumbstick's Y-axis. To map the pianist's head-shaking gesture the thumbstick's X-axis position is paired to the time input of two delay lines (representing the distance to each ear), the cut-off frequency of two low-pass filters, and the amplitude. When one delay time is increased, the other is decreased; one's cut-off frequency is lowered while the other's is raised; and one's amplitude is attenuated while the other's is increased. The exact achievement of this effect is predicated on the use of a stereo loudspeaker setup, so the current implementation, which uses one resonator, generalizes this behavior to map the gesture onto other types of delay-based effects. Another ancillary gesture is the raising or lowing of the 
performer's head. Abstractly, a raised head could mean more high-frequency content while a lowered head could mean more low-frequency content. Hunt and Wanderley use this concept to relate the height of a saxophone bell to the brightness of synthesized sound [10], and similar behavior is modeled here.3.5 Crank, Ratchet, and Wii Remote MappingsThe crank controller behaves similarly to a hurdy gurdy's wheel. Above a certain energy threshold, notes depressed and with a polyphonic aftertouch value above a threshold are “buzzed” (made noisier and brighter), simulating the response of a hurdy-gurdy's non-linear “dog” bridge. Cranking in the reverse direction creates a different timbre. The ratchet controller is mapped to cause an impulsive excitation at each “click” of the rotary encoder. A continuous rotation results in a sequence of impulsive excitations. Amplitude and timbre are slightly affected by the rotational speed, with higher speeds effecting higher dynamic amplitude and brighter timbre. Rotating the ratchet in the opposite direction causes a different timbre and excitation envelope.Although not currently implemented, the bowing controller will exploit the behavior typical of its physical analog, using velocity and force to non-linearly affect amplitude and timbre, using lateral bow position to influence spectral content, and facilitating plucking and striking gestures. The Wii Remote is currently mapped using two types of behavior: it may be played like a shaker or like a rainstick. The program OSCulator retrieves data from the Wii Remote and relays it via OSC to Max/MSP. OSCulator calculates the overall acceleration vector by taking the mean square root of the three individual accelerometer outputs [Troillard, personal communication]. The overall acceleration vector data is smoothed by a user-specified amount in OSCulator and normalized in Max/MSP, which then calculates the parameters of a PhISEM algorithm [4] controlling a custom granular synthesizer. Peaks in the acceleration vector trigger an additional impact sound. When played like a rainstick, the Wii Remote's accelerometer pitch determines PhISEM parameters.3.6 Excitation InteractionsIn contrast with most acoustic instruments, this instrument allows the use of multiple simultaneous excitation mechanisms. For instance, one can theoretically excite the instrument's virtual sounding elements simultaneously by both operating the pump pedal and by blowing. Sometimes it is desirable to distinguish between multiple possible simultaneous excitations and determine which to employ. For example, when the “air level” in the virtual bellows pumped by the pedal is above a threshold, then that excitation is used rather than the impulsive attack triggered by a keyboard strike. Furthermore, sometimes in acoustic instruments multiple excitation methods are not mutually exclusive. On saxophones and violins, for example, a forceful attack with the fingering element (the violinist's left hand, the saxophonist's two hands) results in an impulsive excitation with relatively small amplitude, while the primary excitation mechanism (the violinist's right hand bowing or plucking, the saxophonist's blowing or slap-tonguing) affords a separate excitation that can be either continuous or impulsive depending upon the technique. Thus the present instrument applies this type of mapping when an excitation mechanism beyond the keyboard is used. When the performer uses multiple excitation mechanisms in addition to the keyboard at once, tones resulting from each mechanism sound in addition to a distinct interaction sound similar to the interaction of sounds in a resonator,  like difference tones or multiphonics on acoustic instruments. This instrument models this behavior via ring 
modulation between polyphonic voices, or when using physical modeling synthesis by allowing interaction within a waveguide.4.STRUCTURAL MODIFICATIONSWhile the various excitation and modification types afforded by these controllers suggest several timbral territories to be explored, the performer may investigate further timbral options while retaining the overall responsiveness of the instrument. Therefore, while keeping the continuous modification gestures the instrument allows for structural modification gestures in addition to the one provided by the una corda pedal. In standard keyboard controller and computer interfaces, structural modification gestures often consist of the selection of presets, which may require the user to scroll through menus. This type of process is controlled rather than  automatic: it requires conscious control and cognitive effort and is thus adverse to performance mode [9]. The most intuitive structural modifications on acoustic instruments offer an immediate, one-to-one relationship between an object in a precise spatial position and the resultant sound. Thus, a simple and intuitive solution for allowing structural modification gestures is to utilize modifiers analogous to organ stops—the primary feedback is tactile and spatial, although the current state should be visually obvious as well. Most significantly, each physical stop is to be constructed so that its shape, material, size, and texture are descriptive of its sounding properties. The overall response and responsiveness of the instrument remain largely the same but the basic timbre is modified. These stops have yet to be fully implemented in the present instrument, but preliminary tests have shown this design has great promise.5.RESONATOR BOXRather than using a typical directional loudspeaker—the inadequacies of which have been mentioned by Trueman, Bahn, and Cook [17]—the instrument uses a wooden resonator activated by a transducer powered by a digital amplifier. This design is similar to those used by Jeff Snyder in his Countervielle and Birl instruments [16], but instead of using the famed Rolen-Star transducer [2], now out of production, this design employs the Hidden Audio Systems 801 transducer, which has three times the continuous power handling capability of the Rolen-Star and a flatter frequency response [Boughton, personal communication]. Because of the greater power handling capability, the present instrument uses a more powerful LM3886-based digital amplifier. The resonator is constructed of Baltic birch plywood, chosen for its strength, acoustical properties, durability, and low cost. The transducer is mounted to a maple block acting as a bridge to the soundboard. In the future, aircraft-grade plywood may be used for the soundboard as it may have superior acoustical properties and strength.The resonator box also houses the Arduino microcontroller. Additionally, the crank sensors are mounted to the resonator box, and all other sensors (except the Wii Remote) connect via jacks mounted on the box. The resonator box is intended to rest on the keyboard housing when possible, transmitting important haptic feedback to the performer via the keyboard itself, similar to the feedback provided by an acoustic instrument.6.CONCLUSIONThis paper has introduced a keyboard-based, sensor-augmented instrument intended to take advantage of a pianist's expert technique while affording intimate gestural control of sounds through time. While the design detailed here is specific to this goal, many of the design principles and individual sensors may be advantageously applied to other instruments and meta-instruments and are hopefully suggestive of ways to maximize a performer's expert technique and spare bandwidth.
7.REFERENCES[1]Böttcher, N. and S. Gelineck, S. Serafin. 2007. “PHYSMISM: A control interface for creative exploration of physical models.” In Proceedings of the Conference on New Interfaces for Musical Expression.[2]Collins, N. 2009. Handmade Electronic Music: The Art of Hardware Hacking. Second Edition. New York: Taylor & Francis, 51.[3]Cook, P. 2001. “Principles for Designing Computer Music Controllers.” In Proceedings of the Conference on New Interfaces for Musical Expression.[4]Cook, P. 2002. Real Sound Synthesis for Interactive Applications. Natick, Massachusetts: A K Peters.[5]Cook, P. 2009. “Re-Designing Principles for Computer Music Controllers: a Case Study of SqueezeV ox Maggie.” In Proceedings of the Conference on New Interfaces for Musical Expression.[6]“Endeavour GmbH – evo.” 2011. http://www.endeavour.de/evo.html (last accessed January 28, 2012).[7]Essl, G. and S. O’Modhrain. 2005. “Scrubber: an interface for friction-induced sounds.” In Proceedings of the Conference on New Interfaces for Musical Expression, 70-75.[8]Fuhler, C. 2007. “the Keyolin.” Formerly at http://www.euronet.nl/users/fuhler/keyolin.htm (no longer active). Currently available at http://web.archive.org/web/20071112144425/ www.euronet.nl/users/fuhler/keyolin.htm (last accessed January 28, 2012).[9]Hunt, A. 1999. Radical user interfaces for real-time musical control. Ph.D. dissertation, York University.[10]Hunt, A. and M. Wanderley. 2002. “Mapping performer parameters to synthesis engines.” Organised Sound, 7(2):97-108.[11] Hunt, A. and M. Wanderley, M. Paradis. 2003. “The Importance of Parameter Mapping in Electronic InstrumentDesign.” Journal of New Music Research, 32(4):429-440.[12]Kirn, P. 2011. “More Multi-Touch Keyboard Playing.” http://createdigitalmusic.com/2011/11/more-multi-touch-keyboard-playing/ (last accessed January 28, 2012).[13]Lamb, R. and A. Robertson. 2011. “Seaboard: a new piano keyboard-related interface combining discrete and continuous control.” In Proceedings of the Conference on New Interfaces for Musical Expression. [14]McPherson, A. and Y . Kim. 2011. “Design and applications of a multi-touch musical keyboard.” In Proceedings of the 8th Sound and Music Computing Conference.[15]Rovan, J. B. and M. Wanderley, S. Dubnov, P. Depalle. 1997. “Instrumental gestural mapping strategies as expressivity determinants in computer music performance.” In Kansei, The Technology of Emotion, Proceedings of the AIMI International Workshop. Genoa: Associazione di Informatica Musicale Italiana. 68-73.[16]Snyder, J. 2010. Exploration of an Adaptable Just Intonation System. D.M.A. Dissertation, Columbia University.[17]Trueman, D. and C. Bahn, P. Cook. 2000. “Alternative voices for electronic sound.” In Proceedings of the International Computer Music Conference.[18]Waisvisz, Michel. 1985. “THE HANDS, a set of remote MIDI-controllers.” In Proceedings of the International Computer Music Conference, 313-318.