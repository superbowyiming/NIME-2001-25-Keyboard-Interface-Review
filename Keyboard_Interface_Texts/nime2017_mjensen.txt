A low-cost MRI compatible keyboard 
 
 
Martin Snejbjerg Jensen 1  
Center for Functionally Integrative 
Neuroscience, Department of Clinical 
Medicine, Aarhus University. 
Nørrebrogade 44, Aarhus, Denmark. 
 
 
Ole Adrian Heggli 1 
Center for Music in the Brain, 
Department of Clinical Medicine, 
Aarhus University & The Royal 
Academy of Music Aarhus/Aalborg.  
Nørrebrogade 44, Aarhus, Denmark. 
ole.heggli@clin.au.dk  
 
Peter Vuust  
Center for Music in the Brain, 
Department of Clinical Medicine, 
Aarhus University & The Royal 
Academy of Music Aarhus/Aalborg.  
Nørrebrogade 44, Aarhus, Denmark.  
 
 
Patricia Alves Da Mota  
Center for Music in the Brain, 
Department of Clinical Medicine, 
Aarhus University & The Royal 
Academy of Music Aarhus/Aalborg.  
Nørrebrogade 44, Aarhus, Denmark. 
 
 
 
 
ABSTRACT  
Neuroimaging is a powerful tool to explore how and why 
humans engage in music. Magnetic resonance imaging (MRI) 
has allowed us to identify brain networks and regions implicated 
in a range of cognitive tasks including music perception and 
performance. However, MRI-scanners are noisy and cramped, 
presenting a challenging environment for playing an instrument. 
Here, we present an MRI-compatible polyphonic keyboard with 
a materials cost of 850 $, designed and tested for safe use in 3T 
(three Tesla) MRI-scanners. We describe design considerations, 
and prior work in the field. In addition, we provide 
recommendations for future designs and comment on the 
possibility of using the keyboard in magnetoencephalography 
(MEG) systems. Preliminary results indicate a comfortable 
playing experience with no disturbance of the imaging process. 
Author Keywords  
Neuroimaging, input device, MRI-compatible, fMRI, MEG, keyboard, 
optical sensing.  
ACM Classification  
Human-centered computing~Interface design prototyping  
Hardware~Sensor devices and platforms  
 
1.  INTRODUCTION  
Functional Magnetic resonance imaging (fMRI) is a common 
methodology for studying music performance. Active neurons require 
glucose to return to their original state, a process which causes blood 
to release oxygen at a higher rate compared to inactive neurons. In 
blood-oxygen-level dependant (BOLD) fMRI this is recorded as an 
increased signal [10]. Coupled with the high spatial resolution of MRI 
this allows identification of which brain regions are active in a given 
cognitive task compared to another task with an accuracy of 1-2 mm. 
In contrast to other human brain research techniques such as 
electroencephalography, fMRI allows for better identification of both 
cortical and subcortical activity.   
                                                 
1 Shared first authorship  
 The study of how music perception and performance affect 
brain function and structure has recently established itself as an 
important and burgeoning topic within cognitive neuroscience 
[12]. A challenge for fMRI investigations into music making is to 
create MR-compatible instrument-like interfaces. In order to analyse 
and judge a musical performance, and provide an ecologically valid 
setting, researchers need to be able to accurately capture behavioural 
data. The MRI-scanner presents a challenging environment for user 
interfaces, due to the strong magnetic fields, the limited space, and the 
need for participants to keep their head as still as possible to avoid 
motion artefacts. Previous studies have limited themselves to for 
instance imaginary playing or non-functioning instruments [3, 7, 9]. 
Imagined playing paradigms, however, are not optimal since they do 
not supply feedback for objectively verifying that participants are, in 
fact, imagining playing. Using non-functioning instruments is a step 
forward, but does not provide participants with the full experience of 
music performance due to lacking auditory feedback. Because of these 
constraints, drawing conclusions on brain activity without a solid 
behavioural fundament might lead to suboptimal results, which 
highlights the need for MRI-compatible instrument-like interfaces.  
 In this paper, we first present an overview of the challenges and the 
recent development in designing fMRI-compatible musical interfaces, 
followed by a description of the design and prototyping process of our 
MRI-compatible polyphonic keyboard. The device presented is a fully 
functioning keyboard, currently in use in our 3T MRI-scanners. Due 
to its design, it is with minimal alterations compatible with MEG 
systems. We discuss knowledge gained in the process, preliminary 
user experience findings from an ongoing MRI-study into musical 
improvisation and conclude with providing recommendations for 
future designs. 
2.  DESIGN CONCERNS  
The MRI scanner presents an environment that is challenging for 
conventional digital music instrument (DMI) design. Without going 
into the specific physics, an MRI scanner uses a powerful static 
magnetic field, radio waves and field gradients to record signals that 
are used to generate brain images. This reduces the possible choice of 
materials, since the static magnetic field is sufficiently powerful to be 
able to pull ferromagnetic objects from meters away into the bore of 
the scanner, often with immense acceleration. As this is where the head 
of a subject is placed in cognitive fMRI studies, such materials are 
strictly prohibited within the scanner room. Even non-ferrous metallic 
257
objects might prove challenging to use, due to induction of electrical 
currents from the time-varying magnetic fields resulting in distorted 
images [11]. 
 While MRI-safety is a matter of choosing the correct materials, 
MRI-compliance demands that the designs do not cause any image 
artefacts and retains normal function during the operation of the 
scanner. A commercially available MRI-compatible MIDI keyboard 
(Hybridmojo LLC) containing non-ferrous electronics were tested 
before embarking on this project. However, while the keyboard turned 
out to be safe for MRI-use, the 3T MRI-scanner used interfered with 
its circuits - making the keyboard play itself during scanning. This 
highlights the challenges in using electronics with in the MRI 
environment. We therefore designed our keyboard using only plastic 
and fiber-optics materials. 
 In addition to these concerns, it should be kept in mind that an MRI-
scanner is for many participants an uncomfortable experience. The 
most common wide-bore MRI systems generally have a bore with a 
diameter of 60-70 cm, with our system measuring in at 60 cm 
(Siemens MAGNETOM Trio 3T). The participants head is fixated 
within a head coil, providing little leeway for movement. During fMRI 
sequences, acoustic noise from the scanner will easily reach 120 dB 
SPL [4], and common experiment paradigms often necessitates 30-40 
minutes of scanning time. It is thus important to take the participants 
comfort into account when designing DMIs for use in MR-scanners. 
2.1  Recent development in MRI-
compatible musical interfaces 
V arious MRI-compatible sensors exist, which are sui table for 
designing musical instruments and interfaces. However, the use of 
electronic circuits demands extensive testing to ensure the imaging 
processing is not disturbed, and what might work in a 1.5T scanner 
does not necessarily work in a 3T or 7T scanner.  For this reason, 
optical sensing is preferable, as it does not affect image acquisition. 
There exists various fiber-optic click-button interfaces, which can be 
used to trigger sounds. These devices generally use the USB protocol 
to emulate keypresses on a connected computer, resulting in too high 
latency for musical performance. 
 Recently, there has been an increasing interest in designing and 
using MRI-compatible musical interfaces, exemplified for instance in 
the optoacoustic cello presented by Hollinger and Wanderley in [6]. 
Concerning MRI-compatible keyboards, we are aware of a few other 
attempts: Hollinger et. al. as described in [5], a specially designed 
keyboard by Mag Design and Engineering (Sunnyvale, CA) as 
described in [2, 8], and a commercially available k eyboard from 
Hybridmojo 
2. However, the commercially available keyboard did not 
function properly in our 3T MRI-scanner, and the others are one-off 
designs. Our device is a natural continuation of the piano described in 
Hollinger et. al. with the goal of presenting a functional, low-cost 
polyphonic MR-compatible device offering a naturalistic setting for 
the participants. 
3.  DESIGN 
3.1  Physical design 
Apart from fulfilling the criteria for an MRI-safe and compatible 
device, we decided on making a slim design for low weight and a size 
that would be comfortable for prolonged use while resting on the 
participants lap. We used 25 full size keys, covering two full octaves. 
This size allowed an average sized participant with the keyboard 
resting on their legs to reach all keys by moving the forearm only, with 
their elbow resting on a pillow. As motion artefacts are a challenge in 
MR-studies, this was an important part of the design. The keys were 
taken from an Edirol MIDI keyboard, and stripped for all metal parts. 
                                                 
2 Hybridmojo LLC, http://www.hybridmojo.com/ 
3 KERN HSE100, http://www.kernlasers.com/ 
In order to house the keys a minimalistic laser cut layered design in 
acryl was produced on a KERN HSE100 laser system 3. A total of 12 
layers were then assembled, with 3D printed holders for the fiber-optic 
cables. This design allows for easy dis-/reassembly of the devices in 
case of repairs or alterations. The completed keyboard can be seen in 
figure 1. 
 
Figure 1. The MRI-compatible keyboard, with fiber-optic 
cables exiting at the back of the laser cut case. 
3.2  Sensing 
We used 660nm LEDs with the V ersatile Link fiber-optic system from 
A vago technologies 4 , with each key having its own transmitter and 
receiver circuit placed outside the scanner room. The light is guided 
through fiber-optic wires from the transmitter and back to the receiver. 
Inside the keyboard there is a gap between the fibers where the key can 
break light transmission, allowing us to detect changes in key status. 
This way, only the plastic optical cables and the keyboard itself are 
inside the MR-room, ensuring no interference between the scanner and 
the keyboard.  
 In order to keep a simple design, we decided to only capture key 
press and release, omitting velocity. It would be possible to implement 
velocity by measuring the continuous change of light transmission 
prior to the key being fully depressed. However, this would complicate 
the microcontroller code and require extensive calibration. Another 
solution, which we are considering for an updated design, is a double-
tap design wherein the key breaks light transmission twice in rapid 
succession. Such an implementation would alleviate the calibration 
issues of measuring continuous change, and present a solid 
measurement of key acceleration. While the lack of velocity impacts 
the sensation of playing a real instrument, it should be remembered 
that the dynamic range available for the player in the noisy MR-
environment is severely limited. 
3.3  Hardware and firmware 
implementation 
For each of the 25 keys there is an output from the receiver circuit that 
needs to be monitored, and interpreted into a MIDI signal. In order to 
reduce the amount of input pins needed on the microcontroller we used 
4 daisy-chained Texas Instrument SN74HC165 8-bit parallel-load 
shift-registers. This configuration allows for reducing a total of 32 
inputs to only 4 serial outputs. Our current keyboard uses only 25 
inputs, but this design would allow for augmenting the keyboard with 
further controls, such as pitch-bend, modulation, or a sustain pedal. 
The 4 serial outputs are then connected to an Arduino Nano, running 
an A Tmega328 microcontroller at 16 MHz with a seria l data 
transmission rate of 31250 bps. The setup is shown in figure 2. 
4 Now known as Broadcom Limited, http://www.broadcom.com/  
258
 The Arduino firmware was written using the Arduino IDE 1.8.1 5. It 
functions as a simple state machine, where each key is either in a ON 
or OFF state. It constantly polls the input pins, and if any change is 
detected it sends out either a note-ON or note-OFF message depending 
on the previous state of the specific key, thus ensuring full polyphony.  
MIDI messages are handled using the Arduino MIDI Library v4.3.1. 6, 
transmitting these through a serial output port using a MIDI-
specification 5-pin DIN connector [1].   
 
Figure 2. The fiber-optic connectors, with the Arduino 
microcontroller and MIDI connector shown to the right.  
4.  TESTING AND RESULTS  
We have tested the keyboard on 22 participants, for a total of 8 hours 
and 48 minutes of actual playing. The participants played an average 
of 24 minutes each. They were instructed to perform the melody of a 
well-known jazz standard, to sight-read a new melody, improvise 
melodically, and to improvise freely. In figure 3 an example of how 
participants and the keyboard were positioned inside the scanner is 
shown. Figure 4 shows a sagittal, coronal and axial view of raw data 
from one participant. The topmost images show the average of the 
BOLD-sequence, taken when the participant is playing, while the 
bottommost shows the result of a diffusion tensor imaging sequence, 
taken with the keyboard placed in the vicinity of the scanner. No 
adverse effects on imaging were found, nor have we received any 
complaints of discomfort with the physical placement of the keyboard. 
An occasional challenge is self-triggering and multi-triggering of some 
keys. This self-triggering happens due to the fiber-optic cables being 
moved around, and is usually solved by refastening the cables. We 
intend to fix this problem by better cable management in an updated 
version of the keyboard. Multi-triggering happens when the user 
continuously holds the key at a specific point, causing the optic signal 
to hover around threshold range. This problem could be fixed with 
implementing a gate on incoming triggers, set at a rate which is just 
below the fastest retriggering time. However, in the currently running 
study we found that instructing participants to fully depress keys 
solved the issue.  
                                                 
5 Arduino Foundation, http://www.arduino.org/  
6 Arduino MIDI library, http:/www.fortyseveneffects.com/  
 
Figure 3. Example positioning of a participant and the 
keyboard inside the scanner.  
 
 
Figure 4. Sagittal, coronal and axial view of BOLD and DTI 
raw data.  
For the currently running study the keyboard is attached by a MIDI-
cable to a Roland JV -1010 hardware synthesizer for generating audio. 
From the synthesizer, we use the MIDI-thru functionality to record the 
MIDI data using an external sound card on a Windows computer 
running PsychoPy [10]. This way we avoid any extra latency from 
using a software synthesizer. The piano sound from the synthesizer is 
mixed with a backing track, delivered through OptoACTIVE active 
noise cancelling headphones from Optoacoustics 7 . This solution 
ensures that latency is minimal, while providing the participants with 
an adequate signal-to-noise ratio.  
4.1  Challenges and recommendations  
In our currently running study, the keyboard is placed on the 
participants lap, with their legs on a pillow. This puts the keyboard at a 
small angle, making it easier to reach with only their right hand. 
However, this position could be a challenge for persons with a larger 
girth. A possible solution here would be to fasten the keyboard on a 
tilted stand, and adjusting the playing height for each participant. This 
might pose a challenge due to the bore size of the MRI-scanner, but 
would allow for more controlled positioning of the keyboard.  
 It is worth noting that the key action of our keyboard is more similar 
to that found on a Hammond organ, than on a piano, with the keys 
7 Optoacoustics Ltd., http://www.optoacoustics.com  
259
resting on the base of the laser cut case in their fully depressed state. 
Since participants in our study were used to playing on synthesizers 
and MIDI-controllers, this did not pose a problem. It should however, 
be kept in mind when recruiting participants that s olely play on 
acoustic pianos such as is usually the case for most classically trained 
pianists. 
 While the laser cut base provided an elegant solution to creating a 
low-weight frame for the keyboard, the 3D printed cable holders 
exhibited a size mismatch due to a lacklustre printer calibration and 
material shrink. We were able to work around this issue by manually 
adjusting the parts post-print. For future designs,  it is worth 
considering allowing for manual adjustment of both the laser cut and 
3D printed parts, by having excess material and sanding it afterwards. 
4.2  MEG compatibility 
It should also be possible to use our keyboard with MEG. MEG is a 
functional neuroimaging technique, which records the magnetic fields 
created by the naturally occurring electrical currents in the brain using 
highly sensitive magnetometers. As these fields are smaller than the 
ambient magnetic noise MEG systems are placed in magnetically 
shielded rooms. Participants position their head in a headrest, either in 
a supine position, or sitting in a chair. The system is quiet, and does not 
have the same physical restrictions as the MRI environment. However, 
in order to avoid any noise in the recordings a complete plastic and 
fiber-optic design is preferred for MEG-compatible devices. Our 
keyboard fulfils this criterion, and should be suitable for use in the 
MEG. We intend to test this in upcoming studies. As motion artifacts 
can be a concern in MEG studies, we would recommend creating a 
keyboard stand in order to better control arm motion in participants. 
5.  CONCLUSION 
In this paper, we have presented a viable MEG and MRI compatible 
keyboard. The keyboard costs around 850 $ in materials, factoring in 
an estimated 70 $ for the 25 keys, which is relatively low-cost for most 
labs with neuroimaging facilities. While it is not of comparable quality 
to the keyboards one will find in homes, studios and on the stage, it 
serves its purpose well. The approach of using only fiber-optics and 
plastic is in our opinion the best strategy to future-proof any MRI 
compatible instrument, with both 7T scanners and MEG becoming 
increasingly common in neuroscience. 
 We would encourage the design of novel MRI-compatible DMIs. 
For instance, in order to investigate how learning to play a musical 
instrument changes networks in the brain, an instru ment that is 
playable both inside and outside of an MRI-scanner would provide a 
more ecological valid study. Another aspect is the neural correlates of 
error-correction, for example in non-linear instruments. We hope that 
further studies into how the brain behaves when playing an instrument 
will synergistically benefit both the design of interfaces for musical 
expression and the neuroscience of music. 
6.  ACKNOWLEDGMENTS 
This study was supported by the Danish National Res earch 
Foundation (DNRF117). We would like to thank the Ce nter for 
Functionally Integrative Neuroscience – CFIN/MIND Lab  for 
allowing ample scanner time for prototyping and testing.  
7.  REFERENCES 
[1] MMA MIDI Specifications MIDI Manufacturers 
Association Incorporated. , 2006. 
[2] Bangert, M., Peschel, T., Schlaug, G., Rotte, M.,  
Drescher, D., Hinrichs, H., Heinze, H.-J. and 
Altenmüller, E. Shared networks for auditory and 
motor processing in professional pianists: evidence 
from fMRI conjunction. Neuroimage , 30  (3). 917-926. 
[3] Baumann, S., Koeneke, S., Meyer, M., Lutz, K. an d 
JÄncke, L. A network for sensory 
‐ motor integration. 
Annals of the New York Academy of Sciences , 1060  (1). 
186-188. 
[4] Foster, J.R., Hall, D.A., Summerfield, A.Q., Pal mer, 
A.R. and Bowtell, R.W. Sound ‐ Level Measurements 
and Calculations of Safe Noise Dosage During EPI at 
3 T. Journal of Magnetic Resonance Imaging , 12  (1). 
157-163. 
[5] Hollinger, A., Steele, C., Penhune, V ., Zatorre,  R. and 
Wanderley, M., fMRI-compatible electronic 
controllers. in Proceedings of the 7th international 
conference on New interfaces for musical expression , 
(2007), ACM, 246-249. 
[6] Hollinger, A.D. and Wanderley, M.M. The Design,  
Implementation, and Testing of a Sensorized MRI-
Compatible Cello. IEEE Sensors Journal , 15  (11). 
6125-6134. 
[7] Jäncke, L., Baumann, S., Koeneke, S., Meyer, M.,  
Laeng, B., Peters, M. and Lutz, K. Neural control of  
playing a reversed piano: empirical evidence for an  
unusual cortical organization of musical functions.  
Neuroreport , 17  (4). 447-451. 
[8] Limb, C.J. and Braun, A.R. Neural substrates of 
spontaneous musical performance: An fMRI study of 
jazz improvisation. PLoS one , 3 (2). e1679. 
[9] Lotze, M., Scheler, G., Tan, H.-R., Braun, C. and 
Birbaumer, N. The musician's brain: functional 
imaging of amateurs and professionals during 
performance and imagery. Neuroimage , 20  (3). 1817-
1829. 
[10] Raichle, M.E. Behind the scenes of functional br ain 
imaging: a historical and physiological perspective . 
Proceedings of the National Academy of Sciences , 95  
(3). 765-772. 
[11] Schenck, J.F. The role of magnetic susceptibil ity in 
magnetic resonance imaging: MRI magnetic 
compatibility of the first and second kinds. Medical 
physics , 23  (6). 815-850. 
[12] Vuust, P., Gebauer, L. and Witek, M.A. Neural 
Underpinnings of Music: The Polyrhythmic Brain. in 
Merchant, H. and Lafuente, V .d. eds. Neurobiology of 
Interval Timing , Springer, 2014. 
 
260